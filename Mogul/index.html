<!DOCTYPE html>
<html lang="en" class = "bg-black">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>speciecircle</title>
        <link rel="icon" type="image/x-icon" href="../pics/pic/speciemogulnew.png" />

        <!-- Ethereum Related -->
        <script src="https://unpkg.com/web3@latest/dist/web3.min.js"></script>
        <script type="text/javascript" src="https://unpkg.com/web3@latest/dist/web3.min.js"></script>

        <!-- Font Awesome icons (free version)-->
        <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
        <!-- Google fonts-->
        <!-- Core theme CSS (includes Bootstrap)-->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
        />
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@200;400;600&display=swap" rel="stylesheet">        <link href="css/styles.css" rel="stylesheet" />
        <link href="css/styles.css" rel="stylesheet" />

    <meta name="viewport" content="width=device-width, initial-scale=1">

    
    </head>
    
    <body id="page-top">
       
        <div class="modal fade" id="nowebModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style = "border-radius: 10px;">
          <div class="modal-dialog modal-dialog-centered " style = "position: relative; right: 8px; ">
            <div class="modal-content bg-black text-white" >
             
              <div class="modal-body bg-black text-white">
                You don't have a Web 3.0 wallet installed.<br>
                Please Install A Web 3.0 Wallet<br>
                Try Installing <a class = "text-blue" href="https://metamask.io/">MetaMask.<img  style = "  width: 30px; right: 10px;" src="assets/img/meta.png"></a><br>
                 
        
              </div>
            
            </div>
          </div>
        </div>

        <div class="modal fade" id="connectModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style = "border-radius: 10px;">
          <div class="modal-dialog modal-dialog-centered " style = "position: relative; right: 8px; ">
            <div class="modal-content bg-black text-white" >
             
              <div class="modal-body bg-black text-white">
               Connect Your Wallet!
        
              </div>
            
            </div>
          </div>
        </div>

       
       

    <nav class="navbar fixed-bottom navbar-expand-lg text-white justify-content-center animate__animated animate__fadeInDown">
      <a class="navbar-brand text-white"  > 
        
        <button id = "buttoneth" value = "Connect"  class="btn btn-greygrey btn-outline-dark" style = "position: relative; top: -30px;right: 8px; font-size: 1px; padding: 10px 30px;"
         >
        <style>
          .btn-greygrey {
background-color: #222222  !important;
}
        </style>
      <a class="btn btn-black animate__animated " style = " position: relative;padding: 0px 30px; right: 20px  " ><img src="../pics/pic/MSZN1.png" width = "60px" style = "position: relative; border-radius: 0%; top: 0px; ">
      <a class="btn btn-black btn-outline-warning animate__animated " style = "position: relative; padding: 0px 30px;left: 5px;" href="../" ><img src="../pics/pic/SZN1simpblack.png " width = "60px" style = "position: relative; border-radius: 0%; top: 0px; left: 0px; ">
   
      </span> 
        </button></a>
      <style>
    
      </style>
        
      
  </nav>

      
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark bg-transparent text-white animate__animated animate__fadeInDown">
    <a class="navbar-brand text-white"  onclick = "connectx(); check(); changex(); ethereum.on('connect', () => window.location.reload());"> 
      <button id = "buttoneth" value = "Connect"  class="btn btn-greygrey btn-outline-dark" style = "font-size: 1px; padding: 0px 3px; "
      onclick = "connectx(); check(); changex(); ethereum.on('connect', () => window.location.reload()); ">
      <style>
        .btn-greygrey {
background-color: #222222  !important;
}
      </style>
       <script>
           async function check() {
        // Then get the currently selected radio button's value
        
        console.log(window.ethereum)
  
        if (window.ethereum !== undefined) {
    // From now on, this should always be true:
    // provider === window.ethereum
            console.log(window.ethereum); // initialize your app
            
                                          } else {
  
            
             $("#nowebModal").modal('show');
    
                                          }
  
        // Check the value to make sure you want to show the modal
       
      }
         async function changex()
{  
const accounts = await ethereum.request({ method: 'eth_accounts' });
const balance = await ethereum.request({ method: 'eth_getBalance', params: [accounts[0], 'latest'] });
const chainIDs = await ethereum.request({method: 'eth_chainId'});
if (chainIDs !== "0x89") {
  document.getElementById("connecteth").innerHTML = "Switch To Polygon";
  ethereum.on('chainChanged', (_chainId) => window.location.reload());

} else {
  document.getElementById("connecteth").innerHTML = accounts[0].substring(0,12) + "...";
  document.getElementById("Avatar").src = "assets/img/greenensimage.png"

}

}
async function connectx() {
const accounts = await ethereum.request({ method: 'eth_accounts' });

ethereum
.request({ method: 'eth_requestAccounts' })
.catch((err) => {
if (err.code === 4001) {
  // EIP-1193 userRejectedRequest error
  // If this happens, the user rejected the connection request.
  console.log('Please connect to MetaMask.');
  
  // document.getElementById("Wallet").value=  "Rejected Connection";
  document.getElementById("connecteth").innerHTML = "Rejected Connection";
} else {
  console.error(err);
}
}).then( () => {
changex()

});




}

       </script> 
       <img onload = "changex();" src="assets/img/redensimage.png" id="Avatar" width = "50px" style = "position: relative; border-radius: 50%; top: 0px; left: 5px; ">
       <a id = "connecteth"  class="text-white bg-darkgrey" style = "font-size: 15px; padding: 15px 8px; border-radius:3%; right: 3px; top: px;  position: relative"> Connect
      </a>
      </button></a>
    <style>
  .bg-darkgrey {
  background-color: #333333  !important;
}
    </style>
      
    
  
  </nav>   <script type="text/javascript">
          async function changext()
  {  
       
       
        const accounts = await ethereum.request({ method: 'eth_accounts' });
        const chainIDs = await ethereum.request({method: 'eth_chainId'});

        const web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/v3/e61d9eb52aa74b06ac852b4858bdec52"))
        var inventory = new web3.eth.Contract(inventoryabi, addressInv);
        
        var smallsizes = await inventory.methods.smallSizes().call({from: accounts[0]});
        var medsizes = await inventory.methods.mediumSizes().call({from: accounts[0]});
        var lsizes = await inventory.methods.largeSizes().call({from: accounts[0]});
        var xlsizes = await inventory.methods.xlargeSizes().call({from: accounts[0]});
        var xxlsizes = await inventory.methods.xxlargeSizes().call({from: accounts[0]});
        var totalsupply = (parseInt(smallsizes) + parseInt(medsizes) + parseInt(lsizes) + parseInt(xlsizes) + parseInt(xxlsizes));
        const w3 = new Web3(new Web3.providers.HttpProvider("https://cloudflare-eth.com"))
        var oracle = new w3.eth.Contract(CHAINLINK_ORACLE_ABI, chainlink);


        oracle.methods.latestAnswer().call({from: accounts[0]}, function(error, res) {
                                  if (error != null) {
                                                        console.log(error)
                                                        return;
                                } else {
                                    var data = res;
                                    console.log("Latest price was:" ,res)}
                                    console.log(parseInt(data));
        var pricex = (parseInt(data) / 100000000) *0.08 ;
        var price = parseInt(pricex)  + (parseInt(pricex) * ((100 - parseInt(totalsupply)) / 100));
        document.getElementById("mogsub").value = "$" + price.toFixed(2);
if (chainIDs !== "0x89") {
  document.getElementById("connecteth").innerHTML = "Switch To Polygon";
  ethereum.on('chainChanged', (_chainId) => window.location.reload());

} else {
  document.getElementById("connecteth").innerHTML = accounts[0].substring(0,12) + "...";
  document.getElementById("Avatar").src = "assets/img/greenensimage.png"

}
                                        });
        
        
    
  }


  

    


  
</script>
        
 

        <!-- Masthead-->
        <header class="masthead ">

          
<div class="modal fade animate__animated  animate__fadeInDown" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog " role="document">
    <div class="modal-content bg-black text-white">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Shipping Information & In Stock Supply</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-group">
            <label for="recipient-name" class="col-form-label">Email</label>
            <input type="text" class="form-control bg-black text-white " id="inputEmail">
          </div>
          <div class="form-group">
            <label for="message-text" class="col-form-label">Name</label>
            <input type="text" class="form-control bg-black text-white " id="inputName">
          </div>

          <div class="form-group">
            <label for="message-text" class="col-form-label">Address</label>
            <input type="text" class="form-control bg-black text-white " id="inputAddress">
          </div>
          <div class="form-group">
            <label for="message-text" class="col-form-label">City</label>
            <input type="text" class="form-control bg-black text-white " id="inputCity">
          </div>
          <div class="form-group">
            <label for="message-text" class="col-form-label"> State</label>
            <input type="text" class="form-control bg-black text-white " id="inputState">
          </div>

          <div class="form-group">
            <label for="message-text" class="col-form-label">Zip Code</label>
            <input type="text" class="form-control bg-black text-white " id="inputZip">
          </div>
        <div class="input-group input-group-sm mb-3 bg-black">
  <div class="input-group-prepend bg-black">
    <span class="input-group-text bg-black text-white" id="inputGroup-sizing-sm">Small Size Amount</span>
  </div>
  <input type="number" name="SmallMogul" value = '0'class="form-control bg-black text-white " id="inputSMA" min="0" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
</div>

<div class="input-group input-group-sm mb-3 bg-black">
  <div class="input-group-prepend bg-black">
    <span class="input-group-text bg-black text-white " id="inputGroup-sizing-sm">Medium Size Amount</span>
  </div>
  <input type="number" name="mediumMogul" value = '0' class="form-control bg-black text-white" id="inputMMA" min="0" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
</div>    

<div class="input-group input-group-sm mb-3 bg-black">
  <div class="input-group-prepend bg-black">
    <span class="input-group-text bg-black text-white" id="inputGroup-sizing-sm">Large Size Amount</span>
  </div>
  <input type="number" name="largeMogul" value = '0' class="form-control bg-black text-white" id="inputLMA" min="0" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
</div>

<div class="input-group input-group-sm mb-3 bg-black">
  <div class="input-group-prepend bg-black">
    <span class="input-group-text bg-black text-white" id="inputGroup-sizing-sm">xlarge Size Amount</span>
  </div>
  <input type="number" name="xlargeMogul" value = '0'class="form-control bg-black text-white" id="inputXLMA" min="0" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
</div>
<div class="input-group input-group-sm mb-3 bg-black">
  <div class="input-group-prepend bg-black">
    <span class="input-group-text bg-black text-white" id="inputGroup-sizing-sm">xxlarge Size Amount</span>
  </div>
  <input type="number" name="xxlargeMogul" value = '0' class="form-control bg-black text-white" id="inputXXLMA" min="0" aria-label="Small" aria-describedby="inputGroup-sizing-sm">
</div>
<div class="form-group">
            <label for="message-text" class="col-form-label-lg">Currently In Stock</label>
            <input type="text" class="form-control bg-black text-white " id="s1" readOnly>
          </div>

          <div class="form-group">
            <label for="message-text" class="col-form-label"></label>
            <input type="text" class="form-control bg-black text-white " id="s2" readOnly>
          </div>
          <div class="form-group">
            <label for="message-text" class="col-form-label"></label>
            <input type="text" class="form-control bg-black text-white " id="s3" readOnly>
          </div>
          <div class="form-group">
            <label for="message-text" class="col-form-label"></label>
            <input type="text" class="form-control bg-black text-white " id="s4" readOnly>
          </div>

          <div class="form-group">
            <label for="message-text" class="col-form-label"></label>
            <input type="text" class="form-control bg-black text-white " id="s5" readonly>
          </div>
        </form>
      </div>
      <div class="modal-footer">
      
        <button type="submit" id = "submitMogul" name = "submitXMogul" value = "success" onclick = ''  class="btn btn-darkgrey text-white">Purchase</button>
      </div>
    </div>
  </div>
</div>
<div class="modal fade" id="errorwebModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style = "border-radius: 10px;">
  <div class="modal-dialog modal-dialog-centered " style = "position: relative; right: 8px; ">
    <div class="modal-content bg-black text-white" >
     
      <div class="modal-body bg-black text-white">
       Error
         

      </div>
    
    </div>
  </div>
</div> 
<div class="modal fade" id="successwebModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true" style = "border-radius: 10px;">
  <div class="modal-dialog modal-dialog-centered " style = "position: relative; right: 8px; ">
    <div class="modal-content bg-black text-white" >
     
      <div class="modal-body bg-black text-white">
        You've successfully Purchased a speciecircle item<br>
        You're now apart of the Specie DAO<br>
        Here's your transaction link: <br> <a id="suchash" class = "text-green" href="">Receipt</a><br>
         

      </div>
    
    </div>
  </div>
</div>
            
            <div class="container d-flex h-100 align-items-center animate__animated animate__fadeInDown">
                  <div class="mx-auto text-center">
                   
                    <img  onload = "changex();changext();" class="img-fluid" style = " position: relative; top :-70px" src="../Mogul/assets/img/speciemogulhoodietan.png" width = "650" height = "650" alt="" >
                      
                        
                    <button id = "ineedit" class="btn btn-greygrey btn-outline-dark" style = "font-size: 1px; padding: 5px 40px; position: relative; top :-60px " data-toggle="modal" data-target="" data-whatever="@mdo"
                        onclick = "blackout(); blackout();">
                        <script>
                          async function blackout() {
                           

        if (window.ethereum !== undefined) {
          contractCall();
             $('#ineedit').attr('data-target','#exampleModal');    
             $("#exampleModal").modal('show');
        } else {
          
           
             console.log(window.ethereum)
          $("#connectModal").modal('show');
         

             }
        
      
      } 
                        </script>
                        <style>
                          .btn-greygrey {
                  background-color: #222222  !important;
                  }
                  .btn-darkgrey {
                  background-color: #464545  !important;
                  }
                        </style>
                     <a  class="text-white" style = "font-size: 15px;  border-radius:5%; right: 0px; top: 5px; position: relative" onclick = "blackout(); "> ΞPurchase
                    </a>
                    <input type ="button" class="btn text-white btn-darkgrey" id = 'mogsub' style = "font-size: 15px; padding: 14px 14px; border-radius:5%; left: 35px; top: 0px; position: relative" onclick = "blackout();" value ="Connect">
                  </input>
                         <!-- <img onload = "changex();" src="../A06251A71AB2FC3E.png" alt="Avatar" width = "40px" style = "position: relative; border-radius: 50%; top: -2px; left: 5px; "> -->
                         
                        </button>
                  
                    <style>
                      .btn-greygrey {
          background-color: #222222  !important;
        }
                    </style>


 <script>
 async function contractCall () {
            
            const web3 = new Web3(new Web3.providers.HttpProvider("https://ropsten.infura.io/v3/e61d9eb52aa74b06ac852b4858bdec52"))
            
            const accounts = await ethereum.request({ method: 'eth_accounts' });
            var inventory = new web3.eth.Contract(inventoryabi, addressInv)
            
            var smallsizes = await inventory.methods.smallSizes().call({from: accounts[0]});
            var medsizes = await inventory.methods.mediumSizes().call({from: accounts[0]});
            var lsizes = await inventory.methods.largeSizes().call({from: accounts[0]});
            var xlsizes = await inventory.methods.xlargeSizes().call({from: accounts[0]});
            var xxlsizes = await inventory.methods.xxlargeSizes().call({from: accounts[0]});

            document.getElementById("s1").value ='Small Sizes Supply: ' + smallsizes;
            document.getElementById("s2").value ='Medium Sizes Supply: ' + medsizes;
            document.getElementById("s3").value ='Large Sizes Supply: ' + lsizes;
            document.getElementById("s4").value ='XLarge Sizes Supply: ' + xlsizes;
            document.getElementById("s5").value ='XXLarge Sizes Supply: ' + xxlsizes;

        }
 
async function currentSupply() {
  
  
  const web3 = new Web3("https://cloudflare-eth.com")
  
  
}



</script>                   





                </div>
            </div>
        </header>


        
        <!-- About-->
        

        <!-- Footer-->

      
        <!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-auth.js"></script>

<!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.7.1/firebase-analytics.js"></script>

<script>
 // Import the functions you need from the SDKs you need
import { initializeApp } from "firebase/app";
import { getAnalytics } from "firebase/analytics";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyBvkknbqcOM2KYG3Ja5VW4iW3ZZuSmVqOo",
  authDomain: "speciecircle.firebaseapp.com",
  projectId: "speciecircle",
  storageBucket: "speciecircle.appspot.com",
  messagingSenderId: "1098203895154",
  appId: "1:1098203895154:web:a632af23f9a8ce1a8779eb",
  measurementId: "G-23X951F93S"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
</script>
        <script src="https://cdn.jsdelivr.net/npm/@metamask/detect-provider"></script>
        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/coingecko-api@1.0.10/index.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/coingecko-api@1.0.10/lib/CoinGecko.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/utf8/3.0.0/utf8.js" integrity="sha512-TpkRcfygox9TaC40D5Nu9CQElI7PaQ9d+/RrhWccgvktjgh/HITPo+VZ+xQc98DZbiR3Ct/z9BHXAp/m88j/kw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/utf8/3.0.0/utf8.min.js" integrity="sha512-Up/VFqLmUsS5GMd4XTuxE6NsCsBJlPv12A9apHDqRx8v/x+++Qmmg2M1kTs8cQztxHk0d/rgAqmVOjzEKBZH7A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script type="text/javascript" src="js/utils.js"></script>
        <script type="text/javascript" src="js/metaAcct.js"></script>
        <script type="text/javascript" src="js/abi4inventory.js"></script>
        <script type="text/javascript" src="js/customerInfo.js"></script>
        
        
    </body>
</html>

